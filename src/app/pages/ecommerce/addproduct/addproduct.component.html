<div class="container">
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Créer un Produit</h5>
      <form #formulaireProduit="ngForm" (ngSubmit)="onSoumettre()">
        <div class="mb-3">
          <label for="name" class="form-label">Nom du Produit</label>
          <input
            type="text"
            class="form-control"
            name="name"
            [(ngModel)]="produit.name"
            required
            #name="ngModel"
            placeholder="Entrez le nom du produit"
          />
          <div *ngIf="name.invalid && name.touched" class="text-danger">
            Le nom du produit est requis
          </div>
        </div>

        <div class="mb-3">
          <label for="description" class="form-label">Description</label>
          <textarea
            class="form-control"
            name="description"
            [(ngModel)]="produit.description"
            required
            #description="ngModel"
            placeholder="Entrez une description"
          ></textarea>
          <div *ngIf="description.invalid && description.touched" class="text-danger">
            La description est requise
          </div>
        </div>

        <div class="mb-3">
          <label for="price" class="form-label">Prix</label>
          <input
            type="number"
            class="form-control"
            name="price"
            [(ngModel)]="produit.price"
            required
            min="0.01"
            #price="ngModel"
            placeholder="Entrez le prix"
          />
          <div *ngIf="price.invalid && price.touched" class="text-danger">
            Le prix doit être supérieur à 0
          </div>
        </div>

        <div class="mb-3">
          <label for="stock" class="form-label">Quantité en Stock</label>
          <input
            type="number"
            class="form-control"
            name="stock"
            [(ngModel)]="produit.stock"
            required
            min="1"
            #stock="ngModel"
            placeholder="Entrez la quantité en stock"
          />
          <div *ngIf="stock.invalid && stock.touched" class="text-danger">
            La quantité en stock doit être d’au moins 1
          </div>
        </div>

        <div class="mb-3">
          <label for="category" class="form-label">Catégorie</label>
     <select
  class="form-select"
  name="category"
  [(ngModel)]="produit.category.id"
  required
  #category="ngModel"
  (change)="onCategorieChange($event.target.value)"
>
  <option value="" disabled selected>Sélectionnez une catégorie</option>
  <option *ngFor="let categorie of categories" [ngValue]="categorie.id">
    {{ categorie.name }}
  </option>
</select>

          <div *ngIf="category.invalid && category.touched" class="text-danger">
            La catégorie est requise
          </div>
        </div>

        <div class="mb-3">
          <label for="photo" class="form-label">Photo</label>
          <input type="file" (change)="onPhotoSelectionnee($event)" class="form-control" />
        </div>

        <div class="text-end">
          <button type="submit" class="btn btn-primary" [disabled]="!formulaireProduit.form.valid || !photo">
            Créer le Produit
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
